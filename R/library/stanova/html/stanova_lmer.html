<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Estimate ANOVA-type mixed models with rstanarm</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for stanova_lmer {stanova}"><tr><td>stanova_lmer {stanova}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Estimate ANOVA-type mixed models with rstanarm</h2>

<h3>Description</h3>

<p>Estimate ANOVA-type mixed models with rstanarm
</p>


<h3>Usage</h3>

<pre>
stanova_lmer(formula, data, check_contrasts = "contr.bayes", ...)

stanova_glmer(formula, data, family, check_contrasts = "contr.bayes", ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>formula</code></td>
<td>
<p>a formula describing the full mixed-model to be fitted. Passed
to <code>rstanarm::stan_g/lmer</code>.</p>
</td></tr>
<tr valign="top"><td><code>data</code></td>
<td>
<p><code>data.frame</code> containing the data.</p>
</td></tr>
<tr valign="top"><td><code>check_contrasts</code></td>
<td>
<p><code>character</code> string (of length 1) denoting a contrast
function which should be assigned to all <code>character</code> and <code>factor</code> variables
in the model (as long as the specified contrast is not the global default).
Default is <a href="contr.bayes.html">contr.bayes</a>. Set to <code>NULL</code> to disable the check.</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>further arguments passed to the <code>rstanarm</code> function used for
fitting. Typical arguments are <code>prior</code>, <code>prior_intercept</code>, <code>chain</code>, <code>iter</code>,
or <code>core</code>. Ensure that arguments that cannot be evaluated in the given
context (e.g., <code>weight</code> arguments to binomial models in which only an
unquoted column name is passed) are enclosed in <code>quote()</code>.</p>
</td></tr>
<tr valign="top"><td><code>family</code></td>
<td>
<p><code>family</code> argument passed to <code>stan_glmer</code>.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>These functions are only wrappers around <code><a href="stanova.html">stanova</a></code> setting
<code>model_fun</code> to <code>"glmer"</code> (and <code>family = "gaussian"</code> for <code>stanova_lmer</code>).
</p>


<h3>Examples</h3>

<pre>

data("Machines", package = "MEMSS")

m_machines &lt;- stanova_lmer(score ~ Machine + (Machine|Worker),
                           data=Machines, chains = 2, iter = 500)
summary(m_machines) ## default: difference from intercept

summary(m_machines, diff_intercept = FALSE) ## alt: marginal means

out_array &lt;- stanova_samples(m_machines)
str(out_array)

out_array2 &lt;- stanova_samples(m_machines, dimension_chain = 2)
str(out_array2)

bayesplot::mcmc_trace(out_array2$`(Intercept)`)
bayesplot::mcmc_trace(out_array2$Machine)

out_df &lt;- stanova_samples(m_machines, return = "data.frame")
str(out_df)

data("obk.long", package = "afex")

m2 &lt;- stanova_lmer(value ~ treatment * phase + (1|id), obk.long,
                   chains = 2, iter = 500)

m2
summary(m2)


## with continuous variable
data(md_16.4, package = "afex")
md_16.4$cog &lt;- scale(md_16.4$cog, scale=FALSE)


m_cont0 &lt;- stanova_lmer(induct ~ cog + (cog|room:cond), md_16.4,
                        chains = 2, iter = 500)
summary(m_cont0)

# with interaction:
m_cont1 &lt;- stanova_lmer(induct ~ cond*cog + (cog|room:cond), md_16.4,
                        chains = 2, iter = 500)
summary(m_cont1)

summary(m_cont1, diff_intercept = TRUE)

### glmer models

## binomial model
cbpp &lt;- lme4::cbpp
cbpp$prob &lt;- with(cbpp, incidence / size)
example_model &lt;- stanova_glmer(prob ~ period + (1|herd),
                            data = cbpp, family = binomial,
                            weight = quote(size),
                            chains = 2, cores = 1, seed = 12345, iter = 500)
## Note: we need to quote() the weight column.
## Alterntively passing the column directly also works: cpbb$weights

summary(example_model)


## poisson model
data(Salamanders, package = "glmmTMB")
gm1 &lt;- stanova_glmer(count~spp * mined + (1 | site), data = Salamanders,
                   family = "poisson",
                   chains = 2, cores = 1, seed = 12345, iter = 500)
summary(gm1)
</pre>

<hr /><div style="text-align: center;">[Package <em>stanova</em> version 0.1-0 <a href="00Index.html">Index</a>]</div>
</body></html>
