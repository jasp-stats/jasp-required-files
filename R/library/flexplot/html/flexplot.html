<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Create a &quot;flexible plot&quot; or flexplot</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for flexplot {flexplot}"><tr><td>flexplot {flexplot}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Create a &quot;flexible plot&quot; or flexplot</h2>

<h3>Description</h3>

<p>Create a flexible plot. Flexplot will allow users to create histograms, barcharts, jittered density plots, paneled plots, scatterplots, etc.  
Much of the decision-making is automated, which is pretty freaking awesome.
</p>


<h3>Usage</h3>

<pre>
flexplot(
  formula,
  data = NULL,
  related = F,
  bins = 3,
  labels = NULL,
  breaks = NULL,
  method = "loess",
  se = NULL,
  ghost.line = NULL,
  ghost.reference = NULL,
  spread = c("quartiles", "stdev", "sterr"),
  jitter = NULL,
  raw.data = T,
  sample = Inf,
  prediction = NULL,
  suppress_smooth = F,
  alpha = 0.99977,
  plot.string = F,
  silent = F,
  third.eye = NULL,
  plot.type = c("histogram", "qq", "density", "boxplot", "violin", "line")
)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>formula</code></td>
<td>
<p>A formula of the form  y~x + a | b + z</p>
</td></tr>
<tr valign="top"><td><code>data</code></td>
<td>
<p>The dataset</p>
</td></tr>
<tr valign="top"><td><code>related</code></td>
<td>
<p>Are variables related? If so, it will show a plot of difference scores, rather than the raw scores (for a related t test).</p>
</td></tr>
<tr valign="top"><td><code>bins</code></td>
<td>
<p>The preferred number of bins used when putting quantitative variables into categories. A list can be used if different amounts are wanted for different variables. However, sometimes flexplot cannot 
have that number of bins, but it will try to make it work.</p>
</td></tr>
<tr valign="top"><td><code>labels</code></td>
<td>
<p>A list of the same length as bins</p>
</td></tr>
<tr valign="top"><td><code>breaks</code></td>
<td>
<p>The breaks to be used for the bins.</p>
</td></tr>
<tr valign="top"><td><code>method</code></td>
<td>
<p>The method to be used to draw the lines. Defaults to loess, but it could be &quot;lm&quot;, &quot;logistic&quot;, &quot;polynomial&quot;, &quot;cubic&quot;, &quot;rlm&quot;, or &quot;glm&quot;. Although you could always try something else. Sometimes
flexplot possesses superhuman intelligence.</p>
</td></tr>
<tr valign="top"><td><code>se</code></td>
<td>
<p>Should standard errors be drawn? Defaults to T.</p>
</td></tr>
<tr valign="top"><td><code>ghost.line</code></td>
<td>
<p>Color of the ghost line. Default is NULL (in which case, the ghost line isn't shown).</p>
</td></tr>
<tr valign="top"><td><code>ghost.reference</code></td>
<td>
<p>What groups should be referenced for the ghost line? See examples for how to specify this.</p>
</td></tr>
<tr valign="top"><td><code>spread</code></td>
<td>
<p>Specifies how the &quot;whiskers&quot; of the plots should be draw. Can be &quot;quartiles&quot;, &quot;stdev&quot;, or &quot;sterr.&quot; Defaults to quartiles</p>
</td></tr>
<tr valign="top"><td><code>jitter</code></td>
<td>
<p>Can be either T/F, or a vector of length two, specifying the degree of jitter for the x and y axis, respectively.</p>
</td></tr>
<tr valign="top"><td><code>raw.data</code></td>
<td>
<p>Should raw data be plotted? Defaults to yeaaaaahhhhh-buddy! (i.e., T)</p>
</td></tr>
<tr valign="top"><td><code>sample</code></td>
<td>
<p>Should a sample of the data be plotted? Defaults to NOT sampling (for all variables).</p>
</td></tr>
<tr valign="top"><td><code>prediction</code></td>
<td>
<p>Predicted values for a prediction line. Defaults to NULL. This is generally NOT used when just using flexplot, but it's helpful with the wrapper function <a href="compare.fits.html">compare.fits</a></p>
</td></tr>
<tr valign="top"><td><code>suppress_smooth</code></td>
<td>
<p>Should a fitted line be repressed? Defaults to FALSE</p>
</td></tr>
<tr valign="top"><td><code>alpha</code></td>
<td>
<p>The transparency of the datapoints.</p>
</td></tr>
<tr valign="top"><td><code>plot.string</code></td>
<td>
<p>Should the code to generate the plot be outputted? In the background, flexplot is creating a bunch of strings before it evaluates the model. 
Users can export the string, in case they want to modify the ggplot object</p>
</td></tr>
<tr valign="top"><td><code>silent</code></td>
<td>
<p>Should all messages be suppressed? Defaults to F.</p>
</td></tr>
<tr valign="top"><td><code>third.eye</code></td>
<td>
<p>Should the &quot;third eye&quot; be employed? The third eye will be implemented shortly.</p>
</td></tr>
<tr valign="top"><td><code>plot.type</code></td>
<td>
<p>This argument allows the user to control the type of plot used. Flexplot defaults to histograms (for univariate variables)
but could also do qqplots (using &quot;qq&quot; as the argument) or density plots (using &quot;density&quot;). Also, the user can specify &quot;boxplot&quot; for boxplots and
&quot;violin&quot; for violin plots.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Formula takes the form of y~x + a | b + z. Everything on the right of | will occur in panels (in this case, b will be in the columns and z will be in the rows). Any numeric
variables between ~ and | will fall on the x axis and categorical predictors will be color-coded/symbol-coded/line-coded (if user specifies). If more than one numeric variable is specified
after ~, the second (and third) will be binned. No more than four variables are allow (otherwise, cognitive load is too high). If the user wishes to include another variable,
I recommend they create separate plots, one for each level of the new variable (or a binned level of a numeric variable).
</p>


<h3>Author(s)</h3>

<p>Dustin Fife
</p>


<h3>Examples</h3>

<pre>
data(exercise_data)
d = exercise_data

# # #### histograms and barcharts
flexplot(income~1, data=d)
flexplot(gender~1, data=d)

# ### scatter plot
flexplot(weight.loss~motivation, data=d)	
flexplot(weight.loss~motivation, data=d, method="lm", se=FALSE)	
	#### with regression line and without standard error	

# ### mean plots
flexplot(weight.loss~therapy.type, data=d)
flexplot(weight.loss~therapy.type, data=d, raw.data=FALSE)		
	## without raw data

# ### CHI SQUARE PLOT
flexplot(therapy.type~gender, data=d)	
		
# ### INTERACTION PLOT			
## Not run: flexplot(weight.loss~therapy.type + gender, data=d)
flexplot(weight.loss~therapy.type + gender, data=d, sample=50)	
 #### sampling 50 people instead (to make it less noisy)

# #### ANCOVA PLOT
flexplot(weight.loss~motivation + gender, data=d, se=FALSE)	### remove se

# #### 2N PLOT (2 NUMERIC VARIABLE PLOTS)
flexplot(weight.loss~motivation + income, data=d, se=FALSE, method="lm")
flexplot(weight.loss~motivation + income, data=d, se=FALSE, method="lm", 
	breaks = list(income = c(95000, 100000, 105000)),
	labels=list(income = c("&lt;95K", "&lt;100K", "&lt;105K", "&gt;105K")))		
		### change labels for income

# #### 3N plot
flexplot(weight.loss~motivation + income + health, data=d, se=FALSE, method="lm")	
		## different lines for income
flexplot(weight.loss~motivation | income + health, data=d, se=FALSE, method="lm")	
		## relabel income
flexplot(weight.loss~motivation | income + health, data=d, se=FALSE, method="lm", ghost.line="red",
	breaks = list(income = c(95000, 100000, 105000)),
 	labels=list(income = c("&lt;95K", "&lt;100K", "&lt;105K", "&gt;105K")))	
flexplot(weight.loss~motivation | income + health, data=d, se=FALSE, method="lm", 
	ghost.line="red", ghost.reference=list("health"=31, "income"=90000))	
flexplot(weight.loss~motivation | income + health, data=d, se=FALSE, method="lm", 
	ghost.line="red", ghost.reference=list("health"=31))
flexplot(weight.loss~motivation | income + health, data=d, se=FALSE, method="lm", 
	ghost.line="red", ghost.reference=list("health"=31, "income"=90000, "motivation"=10))
## End(Not run)	
</pre>

<hr /><div style="text-align: center;">[Package <em>flexplot</em> version 0.8.3.2 <a href="00Index.html">Index</a>]</div>
</body></html>
